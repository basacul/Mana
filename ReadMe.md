# Mana
This web application is developed on top of the hyperledger fabric technology stack and represents the prototype for the bachelor thesis with the title __Secure Data Exchange using Distributed Ledger Technologies__.

Mana is a web application for the healthcare system that allows healthcare service providers, patients and insurance companies to securely exchange and manage data in the Mana ecosystem. Mana runs on top of Hyperledger Fabric version 1.2.1 and uses chaincode to handle the logic on how data is accessed and exchanged based on the authorization given by the data owner. The source code for the Hyperledger Fabric application are accessible at [HLF-Mana](https://github.com/basacul/HLF-Mana). 

This application gives the patient the tools to retrieve medical data generated by healthcare service providers and manage a holistic electronic healthcare record. The patient can choose what aspects of his or her record to share, that can be revoked from the user interface.

In addition, Mana allows users to store sensitive data outside the Hyperledger Fabric network application such that the data is not available in the eco system. A messaging service supplements the data requests via the web application.

The goal of Mana is to provide a secure distributed data exchange grid for the healthcare sector by minimizing the investment in new IT infrastructure and providing a tool to accelerate the digital adoption in the healthcare industry.

This application uses Bootstrap, Node.js, Express, Nodemailer, EJS, MongoDB, AWS S3, Hyperledger Composer  and Hyperledger Fabric.

The [synopsis](https://github.com/basacul/Mana/blob/master/documents/Secure_Data_Exchange_Using_Distributed_Ledger_Technologies_Version_0_10.pdf) of my bachelor thesis explains my personal motivation, related systems and works as well as the schedule for this project. The core technology was switched to Hyperledger Fabric as it is more suitable for this project than Ethereum.

The final version of the [Bachelor Thesis](https://github.com/basacul/Mana/blob/master/documents/Bachelor_Thesis_Final_Version.pdf) shows a possible implementation for a secure data exchange solution in the healthcare industry. The thesis introduces the reader to my personal motivation and the technology. In addition, an analysis of the current situation in the German healthcare system showcases the current procedures and requirements, that are implemented in the prototype. The results show, that a secure data exchange is possible using distributed ledger technologies, but due to the complexity of the healthcare sector with a stringent budget plan not feasible for a forseeable future.

The name for this project will be Mana coming from the Polynesian belief, that Mana is an impersonal supernatural power which can be transmitted or inherited. The prototype is live at [Openhealth](http://mana.openhealth.care).


## How to use

You need to install Hyperledger Fabric on a server and set the respective ip address for the variable __hostname__ managed in the config file __hyperledger.js__ in the folder __config__ of this (Mana) repository. After the successful installation, you need to install the business network application file of the repository [HLF-Mana](https://github.com/basacul/HLF-Mana) in Hyperledger Fabric and run a rest server using Hyperledger Composer (deprecated as of 29/08/2019).

Next, you need to install this repository in a system of your choice and please make sure, that you have Node.js istalled, which you can download at their site [Node.js](https://nodejs.org/en/download/). With Node.js istalled you automatically have access to the command __npm__. This web app runs and is tested on nodejs version 12.2.0.

If __git__ is not available on your system, you can download this repository as a zip file and unpack it on your system. In the terminal go to ../../../Mana and run __node app.js__.  Otherwise clone the repository with git.

Check app.js to see how the web application is currently organized and the separate ejs sites. By following this steps you can already test the application on your local machine at localhost:3000.

Make sure you have mongodb installed and set the environment variables accordingly. In my setting, I installed mongodb community version on Windows 10 with the default settings and created a bat file that allows me to start the database manually called StartMongo.bat that includes the following code:

```bat
@echo off
cd "C:\mongodb\bin"
start mongod.exe
timeout 3
start mongo.exe
exit
```

You can have a feeling for this project by visiting the website http://mana.openhealth.care, that hosts this project.
